<element name="smart-post" attributes="model editable fixed onEditMode" on-dblclick="editModeOn" on-keyup="keyUp" on-foreign:update:body="parseBody" on-foreign:update:title="updateTitle">
  <template>
    <style>
      @host {
        smart-post {
          position: relative;
          display: block;
          width: 600px;
          margin: 20px;
          padding: 5px;
        }
      }
      #bodyContainer {
        width: 595px;
      }
      .body {
        min-height: 2em;
        width: 100%;
        height: 100%;
      }
      #title {
        margin-top: 0px;
        min-height: 1em;
      }
      #editableBody {
        border: none;
        height: 3.5em;
        bottom: 10px;
        margin: 0px;
        padding: 0px;
      }
      button {
        float: right;
        background: none;
        border: none;
        cursor: pointer;
      }
      button:hover {
        color: rgb(206, 26, 26);
      }
      #remove {
        top: 0px;
        right: 0px;
        font-size: 15px;
      }
      .clear {
        clear: both;
      }
      .updeatable {
        transition: opacity 1s;
      }
    </style>
    <button id="remove" on-click="remove" hidden?="{{!editable || fixed}}">X</button>
    <div class="clear"></div>
    <h1 id="title" class="updeatable" contentEditable="{{onEditMode}}" on-keyup="updateTitleModel" on-keydown="preventNewLine" on-focusout="editModeOff" on-transitionend="titleTransitionEnded"></h1>
    <div id="bodyContainer">
      <div id="body" class="body updeatable" on-transitionend="bodyTransitionEnded" hidden?="{{onEditMode}}"></div>
      <textarea id="editableBody" class="body" value="{{model.body}}" on-focusout="editModeOff" hidden?="{{!onEditMode}}"></textarea>
    </div>
    <button id="save" on-click="save" hidden>Save</button>
    <div class="clear"></div>
  </template>
  <script>
    @@script
  </script>
</element>
